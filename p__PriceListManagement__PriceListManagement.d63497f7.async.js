(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{CT3a:function(e,t,n){e.exports={blackSpace:"antd-pro-pages-price-list-management-style-blackSpace"}},nYHz:function(e,t,n){"use strict";n.r(t);var a,r,c,i,o=n("2Taf"),l=n.n(o),u=n("vZ4D"),s=n.n(u),p=n("l4Ni"),f=n.n(p),d=n("ujKo"),m=n.n(d),y=n("MhPg"),h=n.n(y),g=n("q1tI"),v=n.n(g),E=n("zHco"),w=(n("IzEo"),n("bx4M")),k=(n("g9YV"),n("wCAj")),x=(n("+L6B"),n("2/Rp")),R=(n("/zsF"),n("PArb")),S=(n("Pwec"),n("CtXQ")),b=(n("2qtc"),n("kLXV")),C=(n("miYZ"),n("tsqr")),I=n("p0pE"),L=n.n(I),M=(n("y8nQ"),n("Vl3Y")),P=n("MuoO"),_=n("qAWK"),D=(n("14J3"),n("BMrR")),O=(n("jCWc"),n("kPKH")),j=n("jehZ"),q=n.n(j),F=(n("5NDa"),n("5rEg")),z=n("KegR");function K(e){return function(){var t,n=m()(e);if(A()){var a=m()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return f()(this,t)}}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var T,V,Y,H=M["a"].Item,J=(a=Object(P["connect"])(function(e){var t=e.loading;return{loading:t.effects["requirementManagement/getList"]}}),r=M["a"].create(),a(c=r((i=function(e){h()(n,e);var t=K(n);function n(){var e;l()(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),e.state={visible:!1},e.showModal=function(){e.setState({visible:!0})},e.handleOk=function(){var t=e.props,n=t.details,a=n.id,r=n.salary_type,c=t.form.validateFields;c(function(t,n){if(!t){var c=L()({id:a,salary_type:r},n);e.add(c)}})},e.add=function(t){var n=e.props.dispatch;n({type:"positionManagement/update",payload:L()({},t,{schema:"PositionPutSchema"}),callback:function(t){t?(C["a"].success("\u63d0\u4ea4\u6210\u529f"),e.success()):C["a"].error("\u9519\u8bef")}})},e.success=function(){var t=e.props,n=t.form.resetFields,a=e.props.onSuccess;a(),e.setState({visible:!1}),n()},e.handleCancel=function(){e.setState({visible:!1})},e}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.way,n=e.details,a=e.onSuccess,r=e.form.getFieldDecorator,c=this.state.visible,i={labelCol:{md:{span:5}},wrapperCol:{md:{span:16}}};return v.a.createElement(g["Fragment"],null,v.a.createElement("span",null,v.a.createElement("a",{onClick:this.showModal},"\u7f16\u8f91")),v.a.createElement(b["a"],{title:"\u7f16\u8f91",visible:c,onOk:this.handleOk,onCancel:this.handleCancel,width:800,destroyOnClose:!0,maskClosable:!1},v.a.createElement(M["a"],null,v.a.createElement(D["a"],{gutter:{md:20,lg:20,xl:40}},v.a.createElement(O["a"],{span:24},v.a.createElement(H,q()({label:"\u804c\u4f4d\u540d\u79f0"},i),r("name",{initialValue:n.name,rules:[{required:!0,message:"\u804c\u4f4d\u540d\u79f0\u4e0d\u53ef\u4e3a\u7a7a"},{max:16,message:"\u804c\u4f4d\u540d\u79f0\u6700\u5927\u957f\u5ea6\u4e3a16"}]})(v.a.createElement(F["a"],{placeholder:"\u8bf7\u8f93\u5165\u804c\u4f4d\u540d\u79f0"}))))),v.a.createElement(D["a"],{gutter:{md:20,lg:20,xl:40}},v.a.createElement(O["a"],{span:24},v.a.createElement(H,q()({label:"\u4ef7\u683c\u7ea7\u522b\u4fe1\u606f"},i),r("position_levels",{initialValue:n.position_levels.map(function(e){return L()({},e,{key:e.id})})})(v.a.createElement(z["a"],{positionId:n.id,way:t,isFunc:!0,onSuccess:a}))))))))}}]),n}(v.a.Component),c=i))||c)||c),N=J;function W(e){return function(){var t,n=m()(e);if(Z()){var a=m()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return f()(this,t)}}function Z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var B,Q,X,U,G,$=(T=Object(P["connect"])(function(e){var t=e.requirementManagement,n=e.menu,a=e.loading;return{list:t.list,companyId:n.companyId,loading:a.effects["requirementManagement/getList"]}}),V=M["a"].create(),T(Y=V(Y=function(e){h()(n,e);var t=W(n);function n(){return l()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props.levelList,t={pageSize:10,total:e.length},n=[{title:"\u7ea7\u522b",dataIndex:"name"},{title:"\u4ef7\u683c",dataIndex:"money"},{title:"\u4eba\u5458\u6570\u91cf",dataIndex:"engineer_count"}];return v.a.createElement(v.a.Fragment,null,v.a.createElement(k["a"],{columns:n,rowKey:function(e){return e.id},dataSource:e,pagination:L()({},t)}))}}]),n}(g["PureComponent"]))||Y)||Y),ee=$,te=n("ggUI");function ne(e){return function(){var t,n=m()(e);if(ae()){var a=m()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return f()(this,t)}}function ae(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var re={day:"\u65e5",month:"\u6708"},ce=(B=Object(P["connect"])(function(e){var t=e.levelManagement,n=e.menu,a=e.loading;return{list:t.list,companyId:n.companyId,loading:a.effects["levelManagement/getList"]}}),Q=M["a"].create(),B(X=Q((G=U=function(e){h()(n,e);var t=ne(n);function n(){var e;l()(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),e.state={page:1,per_page:10,list:{data:[],page_info:{}}},e.getSearch=function(){e.setState({page:1,per_page:10},function(){return e.getList()})},e.getList=function(){var t=e.state,n=t.page,a=t.per_page,r=e.props.way,c={page:n,per_page:a,schema:"PositionWithLevelsSchema",salary_type:"day"===r?0:1};Object(te["c"])(c).then(function(t){t&&e.setState({list:t})})},e.handleChange=function(t){e.setState({page:t.current},function(){e.getList()})},e.add=function(t){var n=e.props.dispatch;n({type:"levelManagement/add",payload:L()({},t),callback:function(t){t?C["a"].success("\u63d0\u4ea4\u6210\u529f"):C["a"].error("\u9519\u8bef"),e.getList()}})},e.deletes=function(t){var n=e.props.dispatch;n({type:"positionManagement/delete",payload:{id:t},callback:function(t){t?C["a"].success("\u5220\u9664\u6210\u529f"):C["a"].error("\u9519\u8bef"),e.getList()}})},e.delete=function(t){b["a"].confirm({content:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",onOk:function(){return e.deletes(t)},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"})},e.expandIcon=function(e){var t=e.expanded;return v.a.createElement(S["a"],{onClick:function(t){return e.onExpand(e.record,t)},type:t?"up":"down"})},e}return s()(n,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this,t=this.state.list,n=this.props.way,a={pageSize:10,total:t.page_info.total},r=[{title:"\u804c\u4f4d",dataIndex:"name"},{title:"\u7ea7\u522b\u6570\u91cf",dataIndex:"position_levels",render:function(e){return e.length}},{title:"\u4eba\u5458\u6570\u91cf",dataIndex:"engineer_count"},{title:"\u64cd\u4f5c",render:function(t){return v.a.createElement(g["Fragment"],null,v.a.createElement("a",{onClick:function(){return e.delete(t.id)}},"\u5220\u9664"),v.a.createElement(R["a"],{type:"vertical"}),v.a.createElement(N,{details:t,way:re[n],onSuccess:e.getList}))}}];return v.a.createElement(w["a"],{title:"\u6309".concat(re[n],"\u8ba1\u8d39"),extra:v.a.createElement(_["a"],{text:v.a.createElement(x["a"],{type:"primary",icon:"plus-circle"},"\u589e\u52a0"),onSuccess:this.getList,way:re[n]})},v.a.createElement("div",null,v.a.createElement(k["a"],{columns:r,rowKey:function(e){return e.id},dataSource:t.data,expandedRowRender:function(e){return v.a.createElement(ee,{levelList:e.position_levels})},expandIcon:this.expandIcon,onChange:this.handleChange,pagination:L()({},a)})))}}]),n}(g["PureComponent"]),U.defaultProps={way:"day"},X=G))||X)||X),ie=ce,oe=n("CT3a"),le=n.n(oe);function ue(e){return function(){var t,n=m()(e);if(se()){var a=m()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return f()(this,t)}}function se(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var pe=function(e){h()(n,e);var t=ue(n);function n(){return l()(this,n),t.apply(this,arguments)}return s()(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return v.a.createElement(E["a"],{title:"\u62a5\u4ef7\u7ba1\u7406"},v.a.createElement(ie,{way:"day"}),v.a.createElement("div",{className:le.a.blackSpace},"\xa0"),v.a.createElement(ie,{way:"month"}))}}]),n}(g["PureComponent"]);t["default"]=pe}}]);