(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"7HYE":function(e,t,a){"use strict";a.r(t);a("IzEo");var r,n,s,l,c=a("bx4M"),i=a("jehZ"),o=a.n(i),u=(a("5NDa"),a("5rEg")),p=(a("+L6B"),a("2/Rp")),m=a("p0pE"),d=a.n(m),f=a("2Taf"),h=a.n(f),y=a("vZ4D"),E=a.n(y),g=a("l4Ni"),v=a.n(g),w=a("ujKo"),b=a.n(w),C=a("MhPg"),k=a.n(C),S=(a("y8nQ"),a("Vl3Y")),_=a("q1tI"),R=a.n(_),x=a("MuoO"),F=a("zHco"),q=(a("2qtc"),a("kLXV")),D=(a("14J3"),a("BMrR")),P=(a("jCWc"),a("kPKH")),M=(a("miYZ"),a("tsqr"));function O(e){return function(){var t,a=b()(e);if(z()){var r=b()(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return v()(this,t)}}function z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var A,Z,j,V,B=S["a"].Item,I=(r=Object(x["connect"])(),n=S["a"].create(),r(s=n((l=function(e){k()(a,e);var t=O(a);function a(){var e;h()(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n)),e.state={visible:!1},e.showModal=function(){e.setState({visible:!0})},e.changePassword=function(t){var a=e.props.dispatch;a({type:"user/changePassword",payload:d()({},t),callback:function(t){t?(M["a"].success("\u4fee\u6539\u6210\u529f"),e.success()):M["a"].error("\u9519\u8bef")}})},e.handleOk=function(){var t=e.props,a=t.form,r=a.validateFields,n=a.setFields,s=t.id;r(function(t,a){if(!t)if(a.new_password===a.new_password_again){var r={new_password:a.new_password,user_id:s};e.changePassword(r)}else n({new_password_again:{value:a.new_password_again,errors:[new Error("\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4")]}})})},e.success=function(){var t=e.props,a=t.form.resetFields,r=t.onSuccess;e.setState({visible:!1}),r(),a()},e.handleCancel=function(){e.setState({visible:!1})},e}return E()(a,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=this.state.visible,r={labelCol:{xs:{span:24},sm:{span:8},md:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16},md:{span:16}}};return R.a.createElement(_["Fragment"],null,R.a.createElement(p["a"],{type:"primary",size:"small",onClick:this.showModal},"\u4fee\u6539\u5bc6\u7801"),R.a.createElement(q["a"],{title:"\u4fee\u6539\u5bc6\u7801",visible:a,onOk:this.handleOk,onCancel:this.handleCancel,width:500,destroyOnClose:!0,maskClosable:!1},R.a.createElement(S["a"],null,R.a.createElement(D["a"],{gutter:{md:20,lg:20,xl:40}},R.a.createElement(P["a"],{span:10,md:20,sm:18},R.a.createElement(B,o()({label:"\u65b0\u5bc6\u7801"},r),t("new_password",{rules:[{required:!0,message:"\u65b0\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"},{message:"\u5bc6\u7801\u5fc5\u987b\u662f8-16\u4f4d\u7684\u5b57\u6bcd\u3001\u6570\u5b57\u7ec4\u5408\uff08\u4ee5\u5b57\u6bcd\u5f00\u5934\uff09",pattern:/^([A-Za-z])(?![a-zA-Z]+$)[0-9A-Za-z]{7,15}$/}]})(R.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u51658-16\u4f4d\u7684\u5b57\u6bcd\u4e0e\u6570\u5b57\u7ec4\u5408",type:"password"}))))),R.a.createElement(D["a"],{gutter:{md:20,lg:20,xl:40}},R.a.createElement(P["a"],{span:10,md:20,sm:18},R.a.createElement(B,o()({label:"\u518d\u8f93\u5165\u4e00\u6b21"},r),t("new_password_again",{rules:[{required:!0,message:"5-15\u4f4d\u6570\u5b57\u6216\u5b57\u6bcd\u7684\u7528\u6237\u540d"}]})(R.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u51658-16\u4f4d\u7684\u5b57\u6bcd\u4e0e\u6570\u5b57\u7ec4\u5408",type:"password"}))))))))}}]),a}(R.a.Component),s=l))||s)||s),H=I;function J(e){return function(){var t,a=b()(e);if(L()){var r=b()(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return v()(this,t)}}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Y=S["a"].Item,$=(A=Object(x["connect"])(function(e){var t=e.user,a=e.loading;return{submitting:a.effects["user/update"],user:t.currentUser}}),Z=S["a"].create(),A(j=Z((V=function(e){k()(a,e);var t=J(a);function a(){var e;h()(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n)),e.state={editor:!1},e.handleSubmit=function(t){var a=e.props,r=a.dispatch,n=a.form;t.preventDefault(),n.validateFieldsAndScroll(function(t,a){if(!t){var n=d()({schema:"BaseUserPut"},a);r({type:"user/update",payload:n,callback:function(){r({type:"user/fetchCurrent"}),e.setState({editor:!1})}})}})},e.onEditor=function(){e.setState({editor:!0})},e.cancelEditor=function(){e.setState({editor:!1})},e.fetchCurrent=function(){var t=e.props.dispatch;t({type:"user/fetchCurrent"})},e}return E()(a,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.user,r=e.submitting,n=this.state.editor,s={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},l=R.a.createElement(R.a.Fragment,null,n?R.a.createElement(R.a.Fragment,null,R.a.createElement(p["a"],{type:"primary",onClick:this.cancelEditor},"\u53d6\u6d88"),R.a.createElement(p["a"],{type:"primary",onClick:this.handleSubmit,loading:r},"\u63d0\u4ea4")):R.a.createElement(p["a"],{type:"primary",onClick:this.onEditor},"\u7f16\u8f91"));return R.a.createElement(F["a"],{hiddenBreadcrumb:!0,title:"\u4e2a\u4eba\u8bbe\u7f6e",action:l},R.a.createElement(c["a"],{bordered:!1},R.a.createElement(S["a"],{onSubmit:this.handleSubmit,hideRequiredMark:!0,style:{marginTop:8}},"company_om"===a.role&&R.a.createElement(Y,o()({},s,{label:"\u8d26\u53f7"}),n?t("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7"}],initialValue:a.username})(R.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7"})):a.username),"purchase"===a.role&&R.a.createElement(R.a.Fragment,null,R.a.createElement(Y,o()({},s,{label:"\u624b\u673a\u53f7\u5417"}),n?t("phone",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u5417"},{message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7535\u8bdd\u53f7\u7801",pattern:/^1[3456789]\d{9}$/}],initialValue:a.phone})(R.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u5417"})):a.phone),R.a.createElement(Y,o()({},s,{label:"\u90ae\u7bb1\u5730\u5740"}),n?t("email",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1"},{type:"email",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u683c\u5f0f"}],initialValue:a.email})(R.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1",maxLength:64})):a.email)),R.a.createElement(Y,o()({colon:!1,label:R.a.createElement("span",null,"\u5bc6\u7801")},s),R.a.createElement(H,{id:a.id,onSuccesss:this.fetchCurrent})))))}}]),a}(_["PureComponent"]),j=V))||j)||j);t["default"]=$}}]);